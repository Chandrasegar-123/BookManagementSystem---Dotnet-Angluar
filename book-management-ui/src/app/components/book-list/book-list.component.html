<h2>Books List</h2>

<p *ngIf="isLoading">Loading books...</p>

<ng-container *ngIf="!isLoading">
  <table *ngIf="books.length > 0; else noData">
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Author</th>
      <th>ISBN</th>
      <th>Publication Date</th>
      <th>Actions</th>
    </tr>
    <tr *ngFor="let book of paginatedBooks">
      <td>{{ book.id }}</td>
      <td>{{ book.title }}</td>
      <td>{{ book.author }}</td>
      <td>{{ book.isbn }}</td>
      <td>{{ book.publicationDate | date:'yyyy-MM-dd' }}</td>
      <td>
        <button [routerLink]="['/edit-book', book.id]">Edit</button>
        <button class="btn-delete" (click)="confirmDelete(book.id)">Delete</button>
      </td>
    </tr>
  </table>

  <!-- Pagination -->
  <div class="pagination" *ngIf="totalPages > 1">
    <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1">‚Äπ Prev</button>

    <button
      *ngFor="let page of pages"
      (click)="goToPage(page)"
      [class.active]="page === currentPage">
      {{ page }}
    </button>

    <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages">Next ‚Ä∫</button>
  </div>

  <ng-template #noData>
    <p>No books found.</p>
  </ng-template>
</ng-container>

<!-- Delete Confirmation Modal -->
<div class="modal-overlay" *ngIf="showDeleteModal">
  <div class="modal">
    <div class="modal-icon">üóëÔ∏è</div>
    <h3>Delete Book</h3>
    <p>Are you sure you want to delete this book? This action cannot be undone.</p>
    <div class="modal-actions">
      <button class="btn-cancel" (click)="cancelDelete()">Cancel</button>
      <button class="btn-confirm" (click)="deleteBook()">Yes, Delete</button>
    </div>
  </div>
</div>